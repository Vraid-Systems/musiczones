
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />

        <link rel="shortcut icon" href="/favicon.ico" />

        <title>Zone Controller</title>
        <meta name="robots" content="noindex,nofollow" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.1.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
        <!-- docs = http://jquerymobile.com/demos/1.0a4.1/ -->

        <style type="text/css">
            .ui-content {
                text-align: center;
                margin: 0 auto;
            }
        </style>

        <script type="text/javascript">
            $("#playListPage").live('pagebeforeshow', function(event, ui){
                $("#zonePlayList").load("/servlets/playlist");
            });
            
            function addMediaToPlayList(theMediaPath) {
                $.post("/servlets/playlist", {"opt": "add", path: theMediaPath});
            }
            
            function browseDirectory(theDirectoryPath) {
                $("#libraryList").load("/servlets/library?path=" + theDirectoryPath);
            }

            function togglePlayListItem(jhash) {
                var jhasha = jhash.split("_");
                var playListIndexInt = jhasha[(jhasha.lenth - 1)];
                $("#zonePlayList").load("/servlets/playlist?opt=toggle&index=" + playListIndexInt);
            }
            
            function loadLibrary() {
                $("#libraryList").load("/servlets/library");
                $.mobile.changePage("#libraryPage");
            }

            function removePlayListItem(jhash) {
                $(jhash).remove();
                var jhasha = jhash.split("_");
                var playListIndexInt = jhasha[(jhasha.lenth - 1)];
                $("#zonePlayList").load("/servlets/playlist?opt=remove&index=" + playListIndexInt);
            }

            function selectZonePage() {
                $.mobile.changePage("/servlets/list-zones-html");
            }

            function settingsPage() {
                $.mobile.changePage("/servlets/settings", "pop");
            }

            function shuffleNowPlaying() {
                $("#zonePlayList").load("/servlets/playlist?opt=shuffle");
            }
        </script>
    </head>
    <body>
        <div id="playListPage" data-role="page" data-theme="d">
            <div data-role="header" data-theme="b" data-position="fixed">
                <a href="javascript:shuffleNowPlaying();" data-role="button" data-icon="grid">Shuffle</a>
                <h1>Now Playing</h1>
                <a href="javascript:settingsPage();" data-role="button" data-icon="gear">Settings</a>
            </div>

            <div data-role="content">
                <ul id="zonePlayList" data-role="listview" data-split-icon="delete" data-split-theme="d"></ul>
            </div>

            <div data-id="mainNavFooter" data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="javascript:selectZonePage();">Zone Selection</a></li>
                        <li><a href="#playListPage" class="ui-btn-active ui-state-persist">Now Playing</a></li>
                        <li><a href="javascript:loadLibrary();">Library</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="libraryPage" data-role="page" data-theme="d">
            <div data-role="header" data-theme="b" data-position="fixed">
                <a href="javascript:shuffleNowPlaying();" data-role="button" data-icon="grid">Shuffle</a>
                <h1>Library</h1>
                <a href="javascript:settingsPage();" data-role="button" data-icon="gear">Settings</a>
            </div>

            <div data-role="content">
                <ul id="libraryList" data-role="listview" data-split-theme="d"></ul>
            </div>

            <div data-id="mainNavFooter" data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="javascript:selectZonePage();">Zone Selection</a></li>
                        <li><a href="#playListPage">Now Playing</a></li>
                        <li><a href="javascript:loadLibrary();" class="ui-btn-active ui-state-persist">Library</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>
