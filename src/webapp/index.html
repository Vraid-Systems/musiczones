
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />

        <link rel="shortcut icon" href="/favicon.ico" />

        <title>Zone Controller</title>
        <meta name="robots" content="noindex,nofollow" />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.js"></script>

        <style type="text/css">
            .ui-content {
                text-align: center;
                margin: 0 auto;
            }
        </style>

        <script type="text/javascript">
            //servlet url constants
            var kZoneSelectionPage = "/servlets/list-zones";
            var kPlayListPageUrlStr = "/servlets/playlist";
            var kLibraryServlet = "/servlets/library";
            var kLibraryAddDialog = "/servlets/library-add-dialog";
            
            //playlist
            function playList_addMediaPath(theMediaPath) {
                $.post(kPlayListPageUrlStr, {
                    opt: "add",
                    path: theMediaPath
                }, function(data) {
                    playList_Load();
                });
            }
            function playList_addMediaPath_NoRedir(theMediaPath) {
                $.post(kPlayListPageUrlStr, {
                    opt: "add",
                    path: theMediaPath
                });
            }
            function playList_Load() {
                $.mobile.changePage(kPlayListPageUrlStr, {
                    reloadPage: true
                });
            }
            function playList_RemoveItem(elementId) {
                var jhasha = elementId.split("_");
                var playListIndexInt = jhasha[(jhasha.length - 1)];
                $.post(kPlayListPageUrlStr, {
                    opt: "remove",
                    index: playListIndexInt
                }, function(data) {
                    playList_Load();
                });
            }
            function playList_Shuffle() {
                $.post(kPlayListPageUrlStr, {
                    opt: "shuffle"
                }, function(data) {
                    playList_Load();
                });
            }
            function playList_Stop() {
                $.post(kPlayListPageUrlStr, {
                    opt: "stop"
                }, function(data) {
                    playList_Load();
                });
            }
            function playList_ToggleItem(elementId) {
                var jhasha = elementId.split("_");
                var playListIndexInt = jhasha[(jhasha.length - 1)];
                $.post(kPlayListPageUrlStr, {
                    opt: "toggle",
                    index: playListIndexInt
                }, function(data) {
                    playList_Load();
                });
            }
            
            //media library
            function mediaLibrary_addMediaRoot() {
                var newServerTypeVal = $("#newServerType option:selected").val();
                var newServerAddressVal = $("#newServerAddress").val();
                var newFilePathVal = $("#newFilePath").val();
                $.post(kLibraryServlet, {
                    opt: "addMediaRoot",
                    newServerType: newServerTypeVal,
                    newServerAddress: newServerAddressVal,
                    newFilePath: newFilePathVal
                }, function(data) {
                    mediaLibrary_Load();
                });
            }
            function mediaLibrary_LoadDirectory(theDirectoryPath) {
                $.mobile.changePage(kLibraryServlet, {
                    data: {path: theDirectoryPath},
                    reloadPage: true
                });
            }
            function mediaLibrary_Load() {
                $.mobile.changePage(kLibraryServlet, {
                    reloadPage: true
                });
            } 
            function mediaLibrary_removeMediaRoot(elementId) {
                var jhasha = elementId.split("_");
                var mediaRootIndexInt = jhasha[(jhasha.length - 1)];
                $.post(kLibraryServlet, {
                    opt: "removeMediaRoot",
                    index: mediaRootIndexInt
                }, function(data) {
                    mediaLibrary_Load();
                });
            }
            
            //other
            function libraryAddPage_Load() {
                $.mobile.changePage(kLibraryAddDialog, {
                    transition: "pop",
                    reloadPage: true
                });
            }
            function zoneSelection_Load() {
                $.mobile.changePage(kZoneSelectionPage, {
                    reloadPage: true
                });
            }
        </script>
    </head>
    <body>
        <div id="zoneController" data-role="page" data-theme="d">
            <div data-role="header" data-theme="b" data-position="fixed">
                <h1>Zone Controller</h1>
            </div>

            <div id="zoneControllerContent" data-role="content">
                Welcome! To get started please select from one of the below
                navigation options.<br />
                <br />
                If you would like to go to a different media zone controller on
                this network, pick <i>Zone Selection</i>. Want to manage the
                tunes I am playing right now? See <i>Now Playing</i>. How about
                adding some more tunes from the library or adding more or your
                favorite media to my library? Check out the <i>Library</i>.
            </div>

            <div data-id="mainNavFooter" data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="javascript:zoneSelection_Load();">Zone Selection</a></li>
                        <li><a href="javascript:playList_Load();">Now Playing</a></li>
                        <li><a href="javascript:mediaLibrary_Load();">Library</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>
